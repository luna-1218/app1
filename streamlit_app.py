import streamlit as st
import random

# ëŒ€ë¥™ë³„ ë‚˜ë¼-ìˆ˜ë„ ë°ì´í„°
continent_data = {
    "ì•„ì‹œì•„": {
        "ë„¤íŒ”": "ì¹´íŠ¸ë§Œë‘",
        "ëŒ€í•œë¯¼êµ­": "ì„œìš¸",
        "ë™í‹°ëª¨ë¥´": "ë”œë¦¬",
        "ë¼ì˜¤ìŠ¤": "ë¹„ì—”í‹°ì•ˆ",
        "ë ˆë°”ë…¼": "ë² ì´ë£¨íŠ¸",
        "ë§ë ˆì´ì‹œì•„": "ì¿ ì•Œë¼ë£¸í‘¸ë¥´",
        "ëª°ë””ë¸Œ": "ë§ë ˆ",
        "ëª½ê³¨": "ìš¸ë€ë°”í† ë¥´",
        "ë¯¸ì–€ë§ˆ": "ë„¤í”¼ë„",
        "ë°”ë ˆì¸": "ë§ˆë‚˜ë§ˆ",
        "ë°©ê¸€ë¼ë°ì‹œ": "ë‹¤ì¹´",
        "ë² íŠ¸ë‚¨": "í•˜ë…¸ì´",
        "ë¶€íƒ„": "íŒ€ë¶€",
        "ë¶í•œ": "í‰ì–‘",
        "ë¸Œë£¨ë‚˜ì´": "ë°˜ë‹¤ë¥´ìŠ¤ë¦¬ë¸Œê°€ì™„",
        "ì‚¬ìš°ë””ì•„ë¼ë¹„ì•„": "ë¦¬ì•¼ë“œ",
        "ìŠ¤ë¦¬ë‘ì¹´": "ì½œë¡¬ë³´",
        "ì‹œë¦¬ì•„": "ë‹¤ë§ˆìŠ¤ì¿ ìŠ¤",
        "ì‹±ê°€í¬ë¥´": "ì‹±ê°€í¬ë¥´",
        "ì•„ëì—ë¯¸ë¦¬íŠ¸": "ì•„ë¶€ë‹¤ë¹„",
        "ì•„ë¥´ë©”ë‹ˆì•„": "ì˜ˆë ˆë°˜",
        "ì•„ì œë¥´ë°”ì´ì”": "ë°”ì¿ ",
        "ì•„í”„ê°€ë‹ˆìŠ¤íƒ„": "ì¹´ë¶ˆ",
        "ì˜ˆë©˜": "ì‚¬ë‚˜",
        "ì˜¤ë§Œ": "ë¬´ìŠ¤ì¹´íŠ¸",
        "ìš”ë¥´ë‹¨": "ì•”ë§Œ",
        "ìš°ì¦ˆë² í‚¤ìŠ¤íƒ„": "íƒ€ìŠˆì¼„íŠ¸",
        "ì´ë¼í¬": "ë°”ê·¸ë‹¤ë“œ",
        "ì´ë€": "í…Œí—¤ë€",
        "ì´ìŠ¤ë¼ì—˜": "ì˜ˆë£¨ì‚´ë ˜",
        "ì¸ë„": "ë‰´ë¸ë¦¬",
        "ì¸ë„ë„¤ì‹œì•„": "ìì¹´ë¥´íƒ€",
        "ì¼ë³¸": "ë„ì¿„",
        "ì¡°ì§€ì•„": "íŠ¸ë¹Œë¦¬ì‹œ",
        "ì¤‘êµ­": "ë² ì´ì§•",
        "ì¹´ìíìŠ¤íƒ„": "ì•„ìŠ¤íƒ€ë‚˜",
        "ì¹´íƒ€ë¥´": "ë„í•˜",
        "ìº„ë³´ë””ì•„": "í”„ë†ˆíœ",
        "ì¿ ì›¨ì´íŠ¸": "ì¿ ì›¨ì´íŠ¸",
        "í‚¤ë¥´ê¸°ìŠ¤ìŠ¤íƒ„": "ë¹„ìŠˆì¼€í¬",
        "íƒœêµ­": "ë°©ì½•",
        "íƒ€ì§€í‚¤ìŠ¤íƒ„": "ë‘ìƒ¨ë² ",
        "íˆ¬ë¥´í¬ë©”ë‹ˆìŠ¤íƒ„": "ì•„ìŠˆí•˜ë°”íŠ¸",
        "íŠ€ë¥´í‚¤ì˜ˆ": "ì•™ì¹´ë¼",
        "íŒŒí‚¤ìŠ¤íƒ„": "ì´ìŠ¬ë¼ë§ˆë°”ë“œ",
        "íŒ”ë ˆìŠ¤íƒ€ì¸": ["ì•Œ ì¿ ë“œìŠ¤","ì˜ˆë£¨ì‚´ë¦¼","ë¼ë§ë¼"],
        "í•„ë¦¬í•€": "ë§ˆë‹ë¼"
    },
    "ì•„í”„ë¦¬ì¹´": {
        "ê°€ë‚˜": "ì•„í¬ë¼",
        "ê°€ë´‰": "ë¦¬ë¸Œë¥´ë¹Œ",
        "ê°ë¹„ì•„": "ë°˜ì¤„",
        "ê¸°ë‹ˆ": "ì½”ë‚˜í¬ë¦¬",
        "ê¸°ë‹ˆë¹„ì‚¬ìš°": "ë¹„ì‚¬ìš°",
        "ë‚˜ë¯¸ë¹„ì•„": "ë¹ˆíŠ¸í›„í¬",
        "ë‚¨ìˆ˜ë‹¨": "ì£¼ë°”",
        "ë‚¨ì•„í”„ë¦¬ì¹´ ê³µí™”êµ­": ["í”„ë¦¬í† ë¦¬ì•„", "ë¸”ë£¸í°í…Œì¸", "ì¼€ì´í”„íƒ€ìš´", "ìš”í•˜ë„¤ìŠ¤ë²„ê·¸"],
        "ë‚˜ì´ì§€ë¦¬ì•„": "ì•„ë¶€ì",
        "ë‹ˆì œë¥´": "ë‹ˆì•„ë©”",
        "ë¼ì´ë² ë¦¬ì•„": "ëª¬ë¡œë¹„ì•„",
        "ë ˆì†Œí† ": "ë§ˆì„¸ë£¨",
        "ë¥´ì™„ë‹¤": "í‚¤ê°ˆë¦¬",
        "ë¦¬ë¹„ì•„": "íŠ¸ë¦¬í´ë¦¬",
        "ë§ˆë‹¤ê°€ìŠ¤ì¹´ë¥´": "ì•ˆíƒ€ë‚˜ë‚˜ë¦¬ë³´",
        "ë§ë¼ìœ„": "ë¦´ë¡±ê¶¤",
        "ë§ë¦¬": "ë°”ë§ˆì½”",
        "ëª¨ë¡œì½”": "ë¼ë°”íŠ¸",
        "ëª¨ë¦¬ì…”ìŠ¤": "í¬íŠ¸ë£¨ì´ìŠ¤",
        "ëª¨ë¦¬íƒ€ë‹ˆ": "ëˆ„ì•…ì‡¼íŠ¸",
        "ëª¨ì ë¹„í¬": "ë§ˆí‘¸íˆ¬",
        "ë² ëƒ‰": "í¬ë¥´í† ë…¸ë³´",
        "ë³´ì¸ ì™€ë‚˜": "ê°€ë³´ë¡œë„¤",
        "ë¶€ë£¬ë””": "ê¸°í…Œê°€",
        "ë¶€ë¥´í‚¤ë‚˜íŒŒì†Œ": "ì™€ê°€ë‘êµ¬",
        "ìƒíˆ¬ë©” í”„ë¦°ì‹œí˜": "ìƒíˆ¬ë©”",
        "ì„¸ë„¤ê°ˆ": "ë‹¤ì¹´ë¥´",
        "ì„¸ì´ì…¸": "ë¹…í† ë¦¬ì•„",
        "ì†Œë§ë¦¬ì•„": "ëª¨ê°€ë””ìŠˆ",
        "ìˆ˜ë‹¨": "í•˜ë¥´íˆ¼",
        "ì‹œì—ë¼ë¦¬ì˜¨": "í”„ë¦¬íƒ€ìš´",
        "ì•Œì œë¦¬": "ì•Œì œ",
        "ì•™ê³¨ë¼": "ë£¨ì•ˆë‹¤",
        "ì—ë¦¬íŠ¸ë ˆì•„": "ì•„ìŠ¤ë§ˆë¼",
        "ì—ìŠ¤ì™€í‹°ë‹ˆ": ["ìŒë°”ë°”ë„¤", "ë¡œë°¤ë°”"],
        "ì—í‹°ì˜¤í”¼ì•„": "ì•„ë””ìŠ¤ì•„ë°”ë°”",
        "ìš°ê°„ë‹¤": "ìº„íŒ”ë¼",
        "ì´ì§‘íŠ¸": "ì¹´ì´ë¡œ",
        "ì ë¹„ì•„": "ë£¨ì‚¬ì¹´",
        "ì ë„ ê¸°ë‹ˆ": "ë§ë¼ë³´",
        "ì¤‘ì•™ì•„í”„ë¦¬ì¹´ê³µí™”êµ­": "ë°©ê¸°",
        "ì§€ë¶€í‹°": "ì§€ë¶€í‹°",
        "ì§ë°”ë¸Œì›¨": "í•˜ë¼ë ˆ",
        "ì°¨ë“œ": "ì€ìë©”ë‚˜",
        "ì¹´ë©”ë£¬": "ì•¼ìš´ë°",
        "ì¹´ë³´ë² ë¥´ë°": "í”„ë¼ì´ì•„",
        "ì¼€ëƒ": "ë‚˜ì´ë¡œë¹„",
        "ì½”ëª¨ë¡œ": "ëª¨ë¡œë‹ˆ",
        "ì½”íŠ¸ë””ë¶€ì•„ë¥´": "ì•¼ë¬´ìˆ˜í¬ë¡œ",
        "ì½©ê³  ê³µí™”êµ­": "ë¸Œë¼ìë¹Œ",
        "ì½©ê³ ë¯¼ì£¼ê³µí™”êµ­": "í‚¨ìƒ¤ì‚¬",
        "íƒ„ìë‹ˆì•„": "ë„ë„ë§ˆ",
        "í† ê³ ": "ë¡œë©”",
        "íŠ€ë‹ˆì§€": "íŠ€ë‹ˆìŠ¤"
        
    },
    "ìœ ëŸ½": {
        "ê·¸ë¦¬ìŠ¤": "ì•„í…Œë„¤",
        "ë„¤ëœë€ë“œ": "ì•”ìŠ¤í…Œë¥´ë‹´",
        "ë…¸ë¥´ì›¨ì´": "ì˜¤ìŠ¬ë¡œ",
        "ë´ë§ˆí¬": "ì½”íœí•˜ê²",
        "ë…ì¼": "ë² ë¥¼ë¦°",
        "ë¼íŠ¸ë¹„ì•„": "ë¦¬ê°€",
        "ëŸ¬ì‹œì•„": "ëª¨ìŠ¤í¬ë°”",
        "ë£¨ë§ˆë‹ˆì•„": "ë¶€ì¿ ë ˆìŠˆí‹°",
        "ë£©ì…ˆë¶€ë¥´í¬": "ë£©ì…ˆë¶€ë¥´í¬",
        "ë¦¬íˆ¬ì•„ë‹ˆì•„": "ë¹Œë‰´ìŠ¤",
        "ë¦¬íˆí…ìŠˆíƒ€ì¸": "íŒŒë‘ì¸ ",
        "ëª¨ë‚˜ì½”": "ëª¨ë‚˜ì½”",
        "ëª¬í…Œë„¤ê·¸ë¡œ": "í¬ë“œê³ ë¦¬ì°¨",
        "ëª°ë„ë°”": "í‚¤ì‹œë„ˆìš°",
        "ëª°íƒ€": "ë°œë ˆíƒ€",
        "ë°”í‹°ì¹¸": "ë°”í‹°ì¹¸",
        "ë²¨ê¸°ì—": "ë¸Œë¤¼ì…€",
        "ë²¨ë¼ë£¨ìŠ¤": "ë¯¼ìŠ¤í¬",
        "ë³´ìŠ¤ë‹ˆì•„ í—¤ë¥´ì²´ê³ ë¹„ë‚˜": "ì‚¬ë¼ì˜ˆë³´",
        "ë¶ë§ˆì¼€ë„ë‹ˆì•„": "ìŠ¤ì½”í˜",
        "ë¶ˆê°€ë¦¬ì•„": "ì†Œí”¼ì•„",
        "ì‚°ë§ˆë¦¬ë…¸": "ì‚°ë§ˆë¦¬ë…¸",
        "ì„¸ë¥´ë¹„ì•„": "ë² ì˜¤ê·¸ë¼ë“œ",
        "ìŠ¬ë¡œë°”í‚¤ì•„": "ë¸Œë¼í‹°ìŠ¬ë¼ë°”",
        "ìŠ¬ë¡œë² ë‹ˆì•„": "ë¥˜ë¸”ë´ë‚˜",
        "ìŠ¤ì›¨ë´": "ìŠ¤í†¡í™€ë¦„",
        "ìŠ¤ìœ„ìŠ¤": "ë² ë¥¸",
        "ìŠ¤í˜ì¸": "ë§ˆë“œë¦¬ë“œ",
        "ì•„ì´ìŠ¬ë€ë“œ": "ë ˆì´ìº¬ë¹„í¬",
        "ì•„ì¼ëœë“œ": "ë”ë¸”ë¦°",
        "ì•ˆë„ë¼": "ì•ˆë„ë¼ë¼ë² ì•¼",
        "ì•Œë°”ë‹ˆì•„": "í‹°ë¼ë‚˜",
        "ì˜êµ­": "ëŸ°ë˜",
        "ì—ìŠ¤í† ë‹ˆì•„": "íƒˆë¦°",
        "ì˜¤ìŠ¤íŠ¸ë¦¬ì•„": "ë¹ˆ",
        "ìš°í¬ë¼ì´ë‚˜": "í‚¤ì´ìš°",
        "ì´íƒˆë¦¬ì•„": "ë¡œë§ˆ",
        "ì²´ì½”": "í”„ë¼í•˜",
        "í¬ë¡œì•„í‹°ì•„": "ìê·¸ë ˆë¸Œ",
        "í‚¤í”„ë¡œìŠ¤": "ë‹ˆì½”ì‹œì•„",
        "í¬ë¥´íˆ¬ê°ˆ": "ë¦¬ìŠ¤ë³¸",
        "í´ë€ë“œ": "ë°”ë¥´ìƒ¤ë°”",
        "í”„ë‘ìŠ¤": "íŒŒë¦¬",
        "í•€ë€ë“œ": "í—¬ì‹±í‚¤",
        "í—ê°€ë¦¬": "ë¶€ë‹¤í˜ìŠ¤íŠ¸"
    },
    "ë¶ì•„ë©”ë¦¬ì¹´": {
        "ê·¸ë ˆë‚˜ë‹¤": "ì„¸ì¸íŠ¸ì¡°ì§€ìŠ¤",
        "ê³¼í…Œë§ë¼": "ê³¼í…Œë§ë¼ì‹œí‹°",
        "ë‹ˆì¹´ë¼ê³¼": "ë§ˆë‚˜ê³¼",
        "ë„ë¯¸ë‹ˆì¹´ ê³µí™”êµ­": "ì‚°í† ë„ë°ê³ ",
        "ë„ë¯¸ë‹ˆì¹´ ì—°ë°©": "ë¡œì¡°",
        "ë©•ì‹œì½”": "ë©•ì‹œì½” ì‹œí‹°",
        "ë¯¸êµ­": "ì›Œì‹±í„´ D.C.",
        "ë°”ë² ì´ë„ìŠ¤": "ë¸Œë¦¬ì§€íƒ€ìš´",
        "ë°”í•˜ë§ˆ": "ë‚˜ì†Œ",
        "ë²¨ë¦¬ì¦ˆ": "ë²¨ëª¨íŒ",
        "ì„¸ì¸íŠ¸ë£¨ì‹œì•„": "ìºìŠ¤íŠ¸ë¦¬ìŠ¤",
        "ì„¸ì¸íŠ¸ë¹ˆì„¼íŠ¸ ê·¸ë ˆë‚˜ë”˜": "í‚¹ìŠ¤íƒ€ìš´",
        "ì„¸ì¸íŠ¸í‚¤ì¸  ë„¤ë¹„ìŠ¤": "ë°”ìŠ¤í…Œë¥´",
        "ì•„ì´í‹°": "í¬ë¥´í† í”„ë­ìŠ¤",
        "ì•¤í‹°ê°€ ë°”ë¶€ë‹¤": "ì„¸ì¸íŠ¸ì¡´ìŠ¤",
        "ì—˜ì‚´ë°”ë„ë¥´": "ì‚°ì‚´ë°”ë„ë¥´",
        "ì˜¨ë‘ë¼ìŠ¤": "í…Œêµ¬ì‹œê°ˆíŒŒ",
        "ìë©”ì´ì¹´": "í‚¹ìŠ¤í„´",
        "ìºë‚˜ë‹¤": "ì˜¤íƒ€ì™€",
        "ì½”ìŠ¤íƒ€ë¦¬ì¹´": "ì‚°í˜¸ì„¸",
        "ì¿ ë°”": "ì•„ë°”ë‚˜",
        "íŠ¸ë¦¬ë‹ˆë‹¤ë“œ í† ë°”ê³ ": "í¬íŠ¸ì˜¤ë¸ŒìŠ¤í˜ì¸",
        "íŒŒë‚˜ë§ˆ": "íŒŒë‚˜ë§ˆ ì‹œí‹°"
    },
    "ë‚¨ì•„ë©”ë¦¬ì¹´": {
        "ê°€ì´ì•„ë‚˜": "ì¡°ì§€íƒ€ìš´",
        "ë² ë„¤ìˆ˜ì—˜ë¼": "ì¹´ë¼ì¹´ìŠ¤",
        "ë³¼ë¦¬ë¹„ì•„": ["ë¼íŒŒìŠ¤","ìˆ˜í¬ë ˆ"],
        "ë¸Œë¼ì§ˆ": "ë¸Œë¼ì§ˆë¦¬ì•„",
        "ìˆ˜ë¦¬ë‚¨": "íŒŒë¼ë§ˆë¦¬ë³´",
        "ì•„ë¥´í—¨í‹°ë‚˜": "ë¶€ì—ë…¸ìŠ¤ ì•„ì´ë ˆìŠ¤",
        "ì—ì½°ë„ë¥´": "í‚¤í† ",
        "ìš°ë£¨ê³¼ì´": "ëª¬í…Œë¹„ë°ì˜¤",
        "ì¹ ë ˆ": "ì‚°í‹°ì•„ê³ ",
        "ì½œë¡¬ë¹„ì•„": "ë³´ê³ íƒ€",
        "íŒŒë¼ê³¼ì´": "ì•„ìˆœì‹œì˜¨",
        "í˜ë£¨": "ë¦¬ë§ˆ"
    },
    "ì˜¤ì„¸ì•„ë‹ˆì•„": {
        "ë‚˜ìš°ë£¨": "ì•¼ë Œ",
        "ë‰´ì§ˆëœë“œ": "ì›°ë§í„´",
        "ë§ˆì…œ ì œë„": "ë§ˆì£¼ë¡œ",
        "ë¯¸í¬ë¡œë„¤ì‹œì•„ ì—°ë°©": "íŒ”ë¦¬í‚¤ë¥´",
        "ë°”ëˆ„ì•„íˆ¬": "í¬íŠ¸ë¹Œë¼",
        "ì‚¬ëª¨ì•„": "ì•„í”¼ì•„",
        "ì†”ë¡œëª¬ ì œë„": "í˜¸ë‹ˆì•„ë¼",
        "í‚¤ë¦¬ë°”ì‹œ": "ì‚¬ìš°ìŠ¤íƒ€ë¼ì™€",
        "í†µê°€": "ëˆ„ì¿ ì•Œë¡œíŒŒ",
        "íˆ¬ë°œë£¨": "í‘¸ë‚˜í‘¸í‹°",
        "íŒŒí‘¸ì•„ë‰´ê¸°ë‹ˆ": "í¬íŠ¸ëª¨ë¥´ì¦ˆë¹„",
        "íŒ”ë¼ìš°": "ì‘ê²Œë£°ë¬´ë“œ",
        "í”¼ì§€": "ìˆ˜ë°”",
        "í˜¸ì£¼": "ìº”ë²„ë¼"
    }
}

# ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”
if "continent" not in st.session_state:
    st.session_state.continent = None
if "country" not in st.session_state:
    st.session_state.country = None
if "score" not in st.session_state:
    st.session_state.score = 0
if "attempts" not in st.session_state:
    st.session_state.attempts = 0
if "playing" not in st.session_state:
    st.session_state.playing = False
if "answered" not in st.session_state:
    st.session_state.answered = False
if "show_hint" not in st.session_state:
    st.session_state.show_hint = False

st.set_page_config(page_title="ìˆ˜ë„ ë§ì¶”ê¸° ê²Œì„", page_icon="ğŸŒ")

st.title("ğŸŒ ìˆ˜ë„ ë§ì¶”ê¸° ê²Œì„")

# --- ëŒ€ë¥™ ì„ íƒ ---
if not st.session_state.playing:
    st.write("ê²Œì„ì„ ì‹œì‘í•˜ê¸° ì „ì— ëŒ€ë¥™ì„ ì„ íƒí•˜ì„¸ìš”!")
    continent = st.selectbox("ëŒ€ë¥™ ì„ íƒ", list(continent_data.keys()))

    if st.button("ê²Œì„ ì‹œì‘"):
        st.session_state.continent = continent
        st.session_state.country = random.choice(list(continent_data[continent].keys()))
        st.session_state.score = 0
        st.session_state.attempts = 0
        st.session_state.playing = True
        st.session_state.answered = False
        st.session_state.show_hint = False
        st.success(f"ğŸ® {continent} ëŒ€ë¥™ ìˆ˜ë„ ë§ì¶”ê¸° ê²Œì„ ì‹œì‘!")

# --- ê²Œì„ ì§„í–‰ ---
if st.session_state.playing:

    st.subheader(f"â“ {st.session_state.country}ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì¼ê¹Œìš”?")

    # íŒíŠ¸ ë²„íŠ¼
    if not st.session_state.answered and st.button("ğŸ’¡ íŒíŠ¸ ë³´ê¸°"):
        st.session_state.show_hint = True

    if st.session_state.show_hint:
        correct = continent_data[st.session_state.continent][st.session_state.country]
        st.info(f"íŒíŠ¸: ìˆ˜ë„ì˜ ì²« ê¸€ìëŠ” **{correct[0]}** ì…ë‹ˆë‹¤.")

    # ë¬¸ì œë§ˆë‹¤ ê³ ìœ í•œ key â†’ ì…ë ¥ì°½ ìë™ ì´ˆê¸°í™”
    answer = st.text_input(
        "ìˆ˜ë„ë¥¼ ì…ë ¥í•˜ì„¸ìš”:",
        key=f"answer_{st.session_state.attempts}_{st.session_state.country}",
        disabled=st.session_state.answered
    )

    col1, col2, col3 = st.columns(3)
    with col1:
        submit = st.button("ì œì¶œ", disabled=st.session_state.answered)
    with col2:
        skip = st.button("â­ï¸ ê±´ë„ˆë›°ê¸°", disabled=st.session_state.answered)
    with col3:
        stop = st.button("ğŸ›‘ ê²Œì„ ë©ˆì¶”ê¸°")

    if submit:
        correct = continent_data[st.session_state.continent][st.session_state.country]
        st.session_state.attempts += 1

        if answer.strip() == correct:
            st.success("ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!")
            st.session_state.score += 1
        else:
            st.error(f"âŒ í‹€ë ¸ìŠµë‹ˆë‹¤! ì •ë‹µì€ {correct} ì…ë‹ˆë‹¤.")

        st.write(f"í˜„ì¬ ì ìˆ˜: {st.session_state.score} / {st.session_state.attempts} ë¬¸ì œ")
        st.session_state.answered = True

    # ê±´ë„ˆë›°ê¸°: ì ìˆ˜/ì‹œë„ ë³€í™” ì—†ì´ ê·¸ëƒ¥ ë‹¤ìŒ ë¬¸ì œ
    if skip:
        st.session_state.country = random.choice(list(continent_data[st.session_state.continent].keys()))
        st.session_state.answered = False
        st.session_state.show_hint = False
        st.rerun()

    # ì •ë‹µ í™•ì¸ í›„ â†’ ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼
    if st.session_state.answered:
        if st.button("â¡ï¸ ë‹¤ìŒ ë¬¸ì œ"):
            st.session_state.country = random.choice(list(continent_data[st.session_state.continent].keys()))
            st.session_state.answered = False
            st.session_state.show_hint = False
            st.rerun()

    # ê²Œì„ ë©ˆì¶”ê¸° ë²„íŠ¼
    if stop:
        st.session_state.playing = False
        accuracy = (st.session_state.score / st.session_state.attempts * 100) if st.session_state.attempts > 0 else 0
        st.warning(f"ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. âœ… ìµœì¢… ì ìˆ˜: {st.session_state.score} / {st.session_state.attempts} "
                   f"(ì •ë‹µë¥ : {accuracy:.1f}%)")

# --- ë©ˆì¶˜ ìƒíƒœì—ì„œ ë‹¤ì‹œ ì‹œì‘ ---
if not st.session_state.playing and st.session_state.attempts > 0:
    if st.button("ë‹¤ì‹œ ì‹œì‘í•˜ê¸°"):
        st.session_state.continent = None
        st.session_state.country = None
        st.session_state.score = 0
        st.session_state.attempts = 0
        st.session_state.playing = False
        st.session_state.answered = False
        st.session_state.show_hint = False
        st.success("ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”! ë¨¼ì € ëŒ€ë¥™ì„ ì„ íƒí•˜ì„¸ìš”.")
